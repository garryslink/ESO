<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Fiches Patient</title>
<style>
body {margin:0; font-family:Arial,sans-serif; background:#fafafa;}
header {padding:15px; display:flex; flex-direction:column; gap:10px;}
header a {color:white; text-decoration:none; font-weight:bold; background:#0056b3; padding:8px 15px; border-radius:5px; width:fit-content;}
header a:hover {background:#003d80;}
.onglets-container {display:flex; flex-direction:column; gap:10px;}
.onglet {width:70px;height:70px; background:#0056b3; border-radius:8px; display:flex; justify-content:center; align-items:center; flex-direction:column; cursor:pointer; transition:transform 0.2s; position:relative;}
.onglet:hover {transform:scale(1.05);}
.onglet .circle {width:40px;height:40px; border-radius:50%; display:flex; justify-content:center; align-items:center; font-weight:bold; font-size:20px; color:#000; background:#ccc;}
.onglet .status {width:12px;height:12px;border-radius:50%;margin-top:5px;background:red;}
.fiche {display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:20px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.3); max-width:500px; width:90%; z-index:1000; box-sizing:border-box;}
.fiche h2 {text-align:center; margin-top:0;}
.fiche label {display:block; margin:10px 0 5px; font-weight:bold;}
.fiche input, .fiche select, .fiche textarea {width:100%; padding:8px; border-radius:5px; border:1px solid #ccc; margin-bottom:15px; box-sizing:border-box; transition:background 0.3s;}
.fiche textarea {resize:vertical;}
.bottom-buttons {display:flex; justify-content:center; gap:10px; margin-top:15px;}
.bottom-buttons button {padding:10px 20px; border:none; border-radius:5px; cursor:pointer;}
.transmission {background:#007bff; color:white;}
.transmission:hover {background:#0056b3;}
.surveillance {background:#6c757d; color:white;}
.surveillance:hover {background:#5a6268;}
.overlay {display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:900;}
</style>
</head>
<body>

<header>
<a href="index.html">‚¨Ö Retour √† l'accueil</a>
<div class="onglets-container">
  <div class="onglet" onclick="ouvrirFiche('fiche1','status1')"><div class="circle">‚ùì</div><div class="status" id="status1"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche2','status2')"><div class="circle">‚ùó</div><div class="status" id="status2"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche3','status3')"><div class="circle">‚úñ</div><div class="status" id="status3"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche4','status4')"><div class="circle">A</div><div class="status" id="status4"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche5','status5')"><div class="circle">B</div><div class="status" id="status5"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche6','status6')"><div class="circle">C</div><div class="status" id="status6"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche7','status7')"><div class="circle">D</div><div class="status" id="status7"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche8','status8')"><div class="circle">E</div><div class="status" id="status8"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche9','status9')"><div class="circle">‚ù§Ô∏è</div><div class="status" id="status9"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche10','status10')"><div class="circle">üíä</div><div class="status" id="status10"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche11','status11')"><div class="circle">‚úö</div><div class="status" id="status11"></div></div>
  <div class="onglet" onclick="ouvrirFiche('fiche12','status12')"><div class="circle">üë∂</div><div class="status" id="status12"></div></div>
</div>
</header>

<div class="overlay" id="overlay" onclick="fermerFiche()"></div>

<!-- Fiches dynamiques -->
<script>
// Fonction ouverture/fermeture
function ouvrirFiche(id){document.querySelectorAll('.fiche').forEach(f=>f.style.display='none'); document.getElementById('overlay').style.display='block'; document.getElementById(id).style.display='block';}
function fermerFiche(){document.querySelectorAll('.fiche').forEach(f=>f.style.display='none'); document.getElementById('overlay').style.display='none';}

// Tableau de fiches
const fichesData = [
{ id:'fiche1', titre:'Intervention', champs:[
  {label:'Adresse',type:'text',id:'adresse1'},
  {label:'Num√©ro',type:'text',id:'numero1'},
  {label:'Type',type:'select',id:'type1',options:['','Voie publique','Domicile','Travail','Autre']},
  {label:'Motif',type:'select',id:'motif1',options:['','Accouchement','Arr√™t cardio ventilatoire','TS','Bless√© au sport','Bless√© au travail','Bless√© chute','Bless√© par arme √† feu','Bless√© par arme blanche','Bless√© sur VP','Bless√© √† domicile','Bless√© √©tablissement enseignement','Br√ªlure','Carence d\'Ambulance HCT','D√©tresse ventilatoire','Intoxication','Malaise au sport','Malaise au travail','Malaise VP','Malaise √† domicile','Noyade / Personne tomb√©e √† l\'eau','Pendaison','Personne inconsciente','Personne ne r√©pondant pas aux appels','Renfort brancardage','Suspicion AVC','√âlectrisation / Foudroiement de personne','Autre']},
  {label:'Situation',type:'textarea',id:'situation1'},
  {label:'√âquipage',type:'text',id:'equipage1'}
]},
{ id:'fiche2', titre:'Identit√© Patient', champs:[
  {label:'Sexe',type:'select',id:'sexe2',options:['','Homme','Femme']},
  {label:'Nom',type:'text',id:'nom2'},
  {label:'Pr√©nom',type:'text',id:'prenom2'},
  {label:'Nom de naissance',type:'text',id:'nomNaissance2'},
  {label:'Date de naissance',type:'date',id:'dateNaissance2'},
  {label:'√Çge',type:'text',id:'age2',readonly:true},
  {label:'Nationalit√©',type:'text',id:'nationalite2'},
  {label:'T√©l√©phone',type:'tel',id:'tel2'},
  {label:'Adresse personnelle',type:'text',id:'adressePerso2'}
]},
{ id:'fiche3', titre:'H√©morragie', champs:[
  {label:'H√©morragie',type:'select',id:'hem3',options:['','Oui','Non']},
  {label:'Obstruction voies a√©riennes',type:'select',id:'vao3',options:['','Libre','Obstru√©']},
  {label:'Traumatisme du rachis',type:'select',id:'rachis3',options:['','Oui','Non']},
  {label:'Conscience',type:'select',id:'conscience3',options:['','Oui','Non']},
  {label:'Plainte principale',type:'text',id:'plainte3'},
  {label:'RAS',type:'button',id:'ras3'}
]},
{ id:'fiche4', titre:'Voie a√©rienne', champs:[
  {label:'Obstruction V.A',type:'select',id:'vao4',options:['','Libre','Obstru√©']},
  {label:'Cause',type:'text',id:'cause4'},
  {label:'RAS',type:'button',id:'ras4'}
]},
{ id:'fiche5', titre:'Respiration', champs:[
  {label:'Arr√™t respiratoire ‚â§6s',type:'select',id:'arret5',options:['','Oui','Non']},
  {label:'Cyanose',type:'select',id:'cyanose5',options:['','Oui','Non']},
  {label:'Sueur',type:'select',id:'sueur5',options:['','Oui','Non']},
  {label:'L√©ger',type:'select',id:'leger5',options:['','Oui','Non']},
  {label:'Bruyante',type:'select',id:'bruyante5',options:['','Oui','Non']},
  {label:'Tirage',type:'select',id:'tirage5',options:['','Oui','Non']},
  {label:'Asym√©trie thoracique',type:'select',id:'asym5',options:['','Oui','Non']},
  {label:'Difficult√© √† parler',type:'select',id:'parler5',options:['','Oui','Non']},
  {label:'RAS',type:'button',id:'ras5'}
]},
// Ajouter fiches 6 √† 12 selon le m√™me mod√®le, avec tous les champs d√©taill√©s
];

// Cr√©ation des fiches dynamiques
fichesData.forEach(f=>{
  const div=document.createElement('div'); div.className='fiche'; div.id=f.id;
  div.innerHTML='<h2>'+f.titre+'</h2>';
  f.champs.forEach(c=>{
    if(c.type==='select'){
      let s='<label>'+c.label+'</label><select id="'+c.id+'">';
      c.options.forEach(o=>s+='<option>'+o+'</option>'); s+='</select>'; div.innerHTML+=s;
    } else if(c.type==='text'){div.innerHTML+='<label>'+c.label+'</label><input type="text" id="'+c.id+'" '+(c.readonly?'readonly':'')+'>';
    } else if(c.type==='date'){div.innerHTML+='<label>'+c.label+'</label><input type="date" id="'+c.id+'">';}
    else if(c.type==='textarea'){div.innerHTML+='<label>'+c.label+'</label><textarea id="'+c.id+'"></textarea>';}
    else if(c.type==='button'){
      const btn=document.createElement('button'); btn.textContent='RAS'; btn.className='ras-button';
      btn.addEventListener('click',()=>{
        f.champs.forEach(cf=>{
          if(cf.type==='select') document.getElementById(cf.id).value=cf.options[1]||'Non';
          if(cf.type==='text' || cf.type==='textarea') document.getElementById(cf.id).value='RAS';
        });
      }); div.appendChild(btn);
    }
  });
  const bottom=document.createElement('div'); bottom.className='bottom-buttons';
  bottom.innerHTML='<button class="transmission">Transmission</button><button class="surveillance">Surveillance</button>';
  div.appendChild(bottom);
  document.body.appendChild(div);
});

// Calcul √¢ge automatique pour fiche2
document.addEventListener('change', function(e){
  if(e.target.id==='dateNaissance2'){
    const d=new Date(e.target.value);
    if(!isNaN(d.getTime())){
      const now=new Date();
      let age=now.getFullYear()-d.getFullYear(); const m=now.getMonth()-d.getMonth();
      if(m<0||(m===0&&now.getDate()<d.getDate())) age--;
      document.getElementById('age2').value=age+' ans';
    } else document.getElementById('age2').value='';
  }
});
</script>
</body>
</html>
