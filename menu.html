<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Application M√©dic</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
    }
    header {
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    header a {
      color: white;
      background: #0056b3;
      text-decoration: none;
      padding: 8px 15px;
      border-radius: 5px;
      font-weight: bold;
      width: fit-content;
    }
    .onglets-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .onglet {
      width: 70px;
      height: 70px;
      background: #0056b3;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      cursor: pointer;
    }
    .onglet .circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
    }
    .onglet .status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-top: 5px;
      background: red;
    }
    .fiche {
      display: none;
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 90%; max-width: 600px;
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      z-index: 1000;
    }
    .fiche h2 { text-align: center; margin-top: 0; }
    label { font-weight: bold; display: block; margin: 10px 0 5px; }
    input, select, textarea {
      width: 100%; padding: 8px;
      border: 1px solid #ccc; border-radius: 5px;
      margin-bottom: 10px;
    }
    textarea { resize: vertical; }
    .bottom-buttons {
      display: flex; justify-content: center;
      gap: 10px; margin-top: 15px;
    }
    .bottom-buttons button {
      padding: 10px 20px;
      border: none; border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      color: white;
    }
    .transmission { background: #007bff; }
    .surveillance { background: #6c757d; }
    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 900;
    }
  </style>
</head>
<body>
  <header>
    <a href="#">‚¨Ö Retour √† l'accueil</a>
    <div class="onglets-container">
      <div class="onglet" onclick="ouvrirFiche(1)"><div class="circle">‚ùì</div><div class="status" id="s1"></div></div>
      <div class="onglet" onclick="ouvrirFiche(2)"><div class="circle">‚ùó</div><div class="status" id="s2"></div></div>
      <div class="onglet" onclick="ouvrirFiche(3)"><div class="circle">‚úñ</div><div class="status" id="s3"></div></div>
      <div class="onglet" onclick="ouvrirFiche(4)"><div class="circle">A</div><div class="status" id="s4"></div></div>
      <div class="onglet" onclick="ouvrirFiche(5)"><div class="circle">B</div><div class="status" id="s5"></div></div>
      <div class="onglet" onclick="ouvrirFiche(6)"><div class="circle">C</div><div class="status" id="s6"></div></div>
      <div class="onglet" onclick="ouvrirFiche(7)"><div class="circle">D</div><div class="status" id="s7"></div></div>
      <div class="onglet" onclick="ouvrirFiche(8)"><div class="circle">E</div><div class="status" id="s8"></div></div>
      <div class="onglet" onclick="ouvrirFiche(9)"><div class="circle">‚ù§Ô∏è</div><div class="status" id="s9"></div></div>
      <div class="onglet" onclick="ouvrirFiche(10)"><div class="circle">üíä</div><div class="status" id="s10"></div></div>
      <div class="onglet" onclick="ouvrirFiche(11)"><div class="circle">‚úö</div><div class="status" id="s11"></div></div>
      <div class="onglet" onclick="ouvrirFiche(12)"><div class="circle">üë∂</div><div class="status" id="s12"></div></div>
    </div>
  </header>

  <div class="overlay" id="overlay" onclick="fermerFiche()"></div>

  <!-- Ici viennent les 12 fiches -->
  <div id="fiches-container"></div>

  <script>
    function creerFiche(num, titre, contenu) {
      return `
        <div class="fiche" id="fiche${num}">
          <h2>${titre}</h2>
          ${contenu}
          <div class="bottom-buttons">
            <button class="transmission">Transmission</button>
            <button class="surveillance">Surveillance</button>
          </div>
        </div>
      `;
    }

    let fichesHTML = "";

    // Fiche 1
    fichesHTML += creerFiche(1,"Circonstance",
      `<label>Adresse</label><input type="text">
       <label>Num√©ro</label><input type="text">
       <label>Motif d'intervention</label>
       <select>
         <option>Accouchement</option>
         <option>Arr√™t cardio ventilatoire</option>
         <option>TS</option>
         <option>Bless√© au sport</option>
         <option>Bless√© au travail</option>
         <option>Bless√© chute</option>
         <option>Bless√© par arme √† feu</option>
         <option>Bless√© par arme blanche</option>
         <option>Bless√© sur VP</option>
         <option>Bless√© √† domicile</option>
         <option>Bless√© √©tablissement enseignement</option>
         <option>Br√ªlure</option>
         <option>Carence d'Ambulance HCT</option>
         <option>D√©tresse ventilatoire</option>
         <option>Intoxication</option>
         <option>Malaise au sport</option>
         <option>Malaise au travail</option>
         <option>Malaise VP</option>
         <option>Malaise √† domicile</option>
         <option>Noyade / Personne tomb√©e √† l'eau</option>
         <option>Pendaison</option>
         <option>Personne inconsciente</option>
         <option>Personne ne r√©pondant pas aux appels</option>
         <option>Renfort brancardage</option>
         <option>Suspicion AVC</option>
         <option>√âlectrisation / Foudroiement</option>
         <option>Autre</option>
       </select>`
    );

    // Fiche 2 (Identit√© Patient)
    fichesHTML += creerFiche(2,"Identit√© Patient",
      `<label>Sexe</label><select><option>Homme</option><option>Femme</option></select>
       <label>Nom</label><input type="text">
       <label>Pr√©nom</label><input type="text">
       <label>Nom de naissance</label><input type="text">
       <label>Date de naissance</label><input type="date" id="dateNaissance2">
       <label>√Çge</label><input type="text" id="age2" readonly>
       <label>Nationalit√©</label><input type="text">
       <label>T√©l√©phone</label><input type="tel">
       <label>Adresse</label><input type="text">`
    );

    // Fiche 3 (Examen rapide)
    fichesHTML += creerFiche(3,"Examen rapide",
      `<label>H√©morragie</label><select><option>Oui</option><option>Non</option></select>
       <label>Obstruction V.A</label><select><option>Libre</option><option>Obstru√©e</option></select>
       <label>Traumatisme rachis</label><select><option>Oui</option><option>Non</option></select>
       <label>Conscience</label><select><option>Oui</option><option>Non</option></select>
       <label>Plaintes</label><textarea></textarea>
       <button onclick="alert('RAS - Normal')">RAS</button>`
    );

    <div class="fiche" id="fiche4">
      <h2>Voies A√©riennes</h2>
      <label>Obstruction des V.A</label>
      <select id="vao4" onchange="validateField(this)"><option value="">--</option><option>Libre</option><option>Obstru√©</option></select>
      <label>Cause</label><input id="cause4" type="text" oninput="validateField(this)">
      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(4)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(4)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    <div class="fiche" id="fiche6">
      <h2>Circulation</h2>
      <div class="row">
        <div class="col"><label>H√©morragie</label><select id="hem6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Arr√™t cardiaque</label><select id="arret6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <div class="row">
        <div class="col"><label>P√¢leur</label><select id="pale6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Sueur</label><select id="sueur6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <div class="row">
        <div class="col"><label>Temp√©rature de la peau alt√©r√©e</label><select id="tempPeau6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Pouls difficilement per√ßu</label><select id="poul6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <div class="row">
        <div class="col"><label>Pouls irr√©gulier</label><select id="irr6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Asym√©trie</label><select id="asym6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <div class="row">
        <div class="col"><label>TRC &gt; 2s</label><select id="trc6" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(6)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(6)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    <div class="fiche" id="fiche7">
      <h2>D√©ficit neurologique</h2>
      <div class="row">
        <div class="col"><label>Conscience</label><select id="con7" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Convulsion</label><select id="conv7" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <label>Dur√©e PCI (s)</label><input id="pci7" type="number" min="0" oninput="validateField(this)">
      <label>Pupilles</label>
      <select id="pup7" onchange="validateField(this)"><option value="">--</option><option>R√©actif et sym√©trique</option><option>Ar√©actif mais sym√©trique</option><option>R√©actif mais asym√©trique</option><option>Asym√©trique et non r√©actif</option></select>
      <div class="row">
        <div class="col"><label>Absence de motricit√©</label><select id="mot7" onchange="validateField(this)"><option value="">--</option><option>Non</option><option>Haut</option><option>Bas</option></select></div>
        <div class="col"><label>Absence de sensibilit√©</label><select id="sen7" onchange="validateField(this)"><option value="">--</option><option>Non</option><option>Haut</option><option>Bas</option></select></div>
      </div>
      <div class="row">
        <div class="col"><label>Agitation</label><select id="agit7" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Paralysie faciale</label><select id="fac7" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <label>Trouble de la parole</label><select id="par7" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select>

      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(7)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(7)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    <div class="fiche" id="fiche8">
      <h2>Environnement</h2>
      <label>L√©sion apparente</label><select id="lesion8" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select>
      <label>Degr√© de br√ªlure</label><select id="brul8" onchange="validateField(this)"><option value="">--</option><option>1er</option><option>2e</option><option>3e</option></select>
      <label>Situation thermique</label>
      <select id="therm8" onchange="validateField(this)"><option value="">--</option><option>Coups de chaud s√©v√®re</option><option>Coups de chaud mod√©r√©</option><option>Normal</option><option>Hypothermie l√©g√®re</option><option>Hypothermie mod√©r√©e</option><option>Hypothermie s√©v√®re</option></select>
      <label>Douleur (0-10)</label><input id="douleur8" type="number" min="0" max="10" oninput="validateField(this)">

      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(8)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(8)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    <div class="fiche" id="fiche9">
      <h2>Constantes</h2>
      <h3>Ventilation</h3>
      <div class="row">
        <div class="col"><label>FR (CPM)</label><input id="fr9" type="number" min="0" oninput="validateField(this)"></div>
        <div class="col"><label>SPO2 Ambiant (%)</label><input id="spo2a9" type="number" min="0" max="100" oninput="validateField(this)"></div>
        <div class="col"><label>SPO2 sous O2 (%)</label><input id="spo2o9" type="number" min="0" max="100" oninput="validateField(this)"></div>
      </div>
      <label>Et SPCO (%)</label><input id="spco9" type="number" min="0" max="100" oninput="validateField(this)">

      <h3>Circulation</h3>
      <div class="row">
        <div class="col"><label>FC (BPM)</label><input id="fc9" type="number" min="0" oninput="validateField(this)"></div>
        <div class="col"><label>PA Gauche (mmHg)</label><input id="pag9" type="number" min="0" oninput="validateField(this)"></div>
        <div class="col"><label>PA Droite (mmHg)</label><input id="pad9" type="number" min="0" oninput="validateField(this)"></div>
      </div>

      <h3>Divers</h3>
      <div class="row">
        <div class="col"><label>Glyc√©mie (g/L)</label><input id="gly9" type="number" min="0" step="0.1" oninput="validateField(this)"></div>
        <div class="col"><label>Douleur 0/10</label><input id="dou9" type="number" min="0" max="10" oninput="validateField(this)"></div>
        <div class="col"><label>Temp√©rature (¬∞C)</label><input id="temp9" type="number" step="0.1" oninput="validateField(this)"></div>
      </div>

      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(9)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(9)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    <div class="fiche" id="fiche10">
      <h2>M√©dicaments / Solut√©s</h2>
      <h3>Ajouter un m√©dicament</h3>
      <div class="row">
        <div class="col"><label>Nom m√©dicament</label><input id="med_nom" type="text"></div>
        <div class="col small"><label>Quantit√©</label><input id="med_qte" type="text"></div>
        <div class="col small"><label>Voie</label><input id="med_voie" type="text"></div>
        <div class="col small"><label>Heure</label><input id="med_time" type="time"></div>
      </div>
      <button class="btn" onclick="ajouterMed()">Ajouter m√©dicament</button>

      <h3 style="margin-top:12px">Tableau des m√©dicaments</h3>
      <table id="med_table"><thead><tr><th>Heure</th><th>Nom</th><th>Quantit√©</th><th>Voie</th></tr></thead><tbody></tbody></table>

      <h3 style="margin-top:12px">Ajouter un solut√©</h3>
      <div class="row">
        <div class="col"><label>Nom solut√©</label><input id="sol_nom" type="text"></div>
        <div class="col small"><label>Quantit√©</label><input id="sol_qte" type="text"></div>
        <div class="col small"><label>Voie</label><input id="sol_voie" type="text"></div>
        <div class="col small"><label>Heure</label><input id="sol_time" type="time"></div>
      </div>
      <button class="btn" onclick="ajouterSol()">Ajouter solut√©</button>

      <h3 style="margin-top:12px">Tableau solut√©s</h3>
      <table id="sol_table"><thead><tr><th>Heure</th><th>Nom</th><th>Quantit√©</th><th>Voie</th></tr></thead><tbody></tbody></table>

      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(10)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(10)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    <div class="fiche" id="fiche11">
      <h2>Vitaux / Gestes</h2>
      <div class="row">
        <div class="col"><label>Relevage</label><select id="relev11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Garrot</label><select id="garot11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Heure pose garrot</label><input id="garotTime11" type="time" onchange="validateField(this)"></div>
      </div>
      <div class="row">
        <div class="col"><label>Pansement compressif</label><select id="pan11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>RCP</label><select id="rcp11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Insufflation</label><select id="ins11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>
      <div class="row">
        <div class="col"><label>Si insufflation : L/min</label><input id="insL11" type="number" min="0" oninput="validateField(this)"></div>
        <div class="col"><label>Inhalation</label><select id="inh11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Si inhalation : L/min</label><input id="inhL11" type="number" min="0" oninput="validateField(this)"></div>
      </div>
      <div class="row">
        <div class="col"><label>D√©fibrillation</label><select id="def11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
        <div class="col"><label>Si d√©fibrillation : nb</label><input id="defNb11" type="number" min="0" oninput="validateField(this)"></div>
        <div class="col"><label>Aspiration mucosit√©s</label><select id="asp11" onchange="validateField(this)"><option value="">--</option><option>Oui</option><option>Non</option></select></div>
      </div>

      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(11)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(11)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

<div class="fiche" id="fiche12">
      <h2>Score de Malinas (NR)</h2>
      <label>Nombre de grossesses</label><input id="malina_gp" type="number" min="0" oninput="validateField(this); calcMalinas()">
      <label>Mois de grossesse (mois)</label><input id="malina_month" type="number" min="0" max="12" oninput="validateField(this); calcMalinas()">
      <label>Date des derni√®res r√®gles</label><input id="malina_lmp" type="date" onchange="validateField(this)">
      <label>Date du terme</label><input id="malina_due" type="date" onchange="validateField(this)">
      <label>Dur√©e du travail (min)</label><input id="malina_work" type="number" min="0" oninput="validateField(this); calcMalinas()">
      <div class="row">
        <div class="col"><label>Intervalle des contractions</label><input id="malina_interval" type="number" min="0" oninput="validateField(this); calcMalinas()"></div>
        <div class="col small"><label>Unit√©</label><select id="malina_interval_unit" onchange="validateField(this); calcMalinas()"><option value="min">min</option><option value="sec">sec</option></select></div>
      </div>
      <label>Dur√©e des contractions (s)</label><input id="malina_dur" type="number" min="0" oninput="validateField(this); calcMalinas()">
      <label>Perte des eaux</label><select id="malina_water" onchange="validateField(this); calcMalinas()"><option value="">--</option><option>Oui</option><option>Non</option></select>
      <label>Saignement estim√© (mL)</label><input id="malina_bleed" type="number" min="0" oninput="validateField(this); calcMalinas()">
      <label>Envie de pousser</label><select id="malina_push" onchange="validateField(this); calcMalinas()"><option value="">--</option><option>Oui</option><option>Non</option></select>

      <h3>Score calcul√©</h3>
      <input id="malina_score" type="text" readonly>

      <div class="footer-actions">
        <button class="btn ras" onclick="rasFiche(12)">RAS</button>
        <button class="btn" onclick="openTransmissionFromFiche(12)">Transmission</button>
        <button class="btn gray" onclick="closeFiche()">Fermer</button>
      </div>
    </div>

    document.getElementById("fiches-container").innerHTML = fichesHTML;

    function ouvrirFiche(n) {
      document.querySelectorAll(".fiche").forEach(f=>f.style.display="none");
      document.getElementById("fiche"+n).style.display="block";
      document.getElementById("overlay").style.display="block";
    }
    function fermerFiche() {
      document.querySelectorAll(".fiche").forEach(f=>f.style.display="none");
      document.getElementById("overlay").style.display="none";
    }

    // Calcul de l'√¢ge auto pour Fiche 2
    document.addEventListener("change", e=>{
      if(e.target.id==="dateNaissance2"){
        const d=new Date(e.target.value);
        if(!isNaN(d)){
          let today=new Date();
          let age=today.getFullYear()-d.getFullYear();
          const m=today.getMonth()-d.getMonth();
          if(m<0 || (m===0 && today.getDate()<d.getDate())) age--;
          document.getElementById("age2").value=age+" ans";
        }
      }
    });
  </script>
</body>
</html>
