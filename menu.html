<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Application avec formulaires</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f0f0f0; }
    .topbar {
      background:#1976d2; color:white; padding:20px; display:flex; align-items:center;
      font-size:22px; font-weight:700; position:relative;
    }
    .back-btn {
      position:absolute; left:16px; font-size:16px; background:white; color:#1976d2;
      padding:6px 10px; border-radius:6px; cursor:pointer; border:none; font-weight:700;
    }
    .container { display:flex; height:calc(100vh - 70px); }
    .sidebar {
      width:80px; background:#1976d2; display:flex; flex-direction:column; align-items:center;
      padding-top:20px; gap:14px; overflow:auto;
    }
    .sidebar i {
      font-size:26px; color:white; background:#1565c0; padding:16px; border-radius:10px;
      cursor:pointer; width:56px; height:56px; display:flex; align-items:center; justify-content:center;
      transition:background .15s;
    }
    .sidebar i:hover { background:#0d47a1; }
    .content { flex:1; padding:20px; background:#f9f9f9; overflow:auto; }
    .form-box { display:none; background:white; padding:18px; border-radius:10px; border:1px solid #ddd; }
    .form-box.active { display:block; }
    label { display:block; margin-top:10px; font-weight:700; }
    input, textarea { width:100%; padding:8px; margin-top:6px; border:1px solid #ccc; border-radius:6px; }
    .btn-container { display:flex; justify-content:center; gap:30px; margin-top:18px; }
    .btn { padding:14px 28px; font-size:18px; border-radius:10px; border:none; cursor:pointer; font-weight:700; color:white; }
    .btn-blue { background:#1976d2; }
    .btn-orange { background:#ff7043; }
  </style>
</head>
<body>

  <div class="topbar">
    <button class="back-btn" onclick="goBack()">← Retour</button>
    Mon Application (éditeur de fiches)
  </div>

  <div class="container">
    <div class="sidebar">
      <i class="fas fa-home"      title="Accueil / Fiche 1"       onclick="showForm('form1')"></i>
      <i class="fas fa-user-md"   title="Fiche 2 - Médecin"       onclick="showForm('form2')"></i>
      <i class="fas fa-ambulance" title="Fiche 3 - Ambulance"     onclick="showForm('form3')"></i>
      <i class="fas fa-hospital"  title="Fiche 4 - Hôpital"       onclick="showForm('form4')"></i>
      <i class="fas fa-phone"     title="Fiche 5 - Téléphone"     onclick="showForm('form5')"></i>
      <i class="fas fa-heartbeat" title="Fiche 6 - Cœur"          onclick="showForm('form6')"></i>
      <i class="fas fa-stethoscope" title="Fiche 7 - Stétho"      onclick="showForm('form7')"></i>
      <i class="fas fa-notes-medical" title="Fiche 8 - Notes"     onclick="showForm('form8')"></i>
      <i class="fas fa-syringe"   title="Fiche 9 - Injection"     onclick="showForm('form9')"></i>
      <i class="fas fa-band-aid"  title="Fiche 10 - Pansement"    onclick="showForm('form10')"></i>
      <i class="fas fa-briefcase-medical" title="Fiche 11 - Trousse" onclick="showForm('form11')"></i>
      <i class="fas fa-procedures" title="Fiche 12 - Hospitalisé" onclick="showForm('form12')"></i>
    </div>

    <div class="content">
      <!-- Form 1 (maintenant une fiche comme les autres) -->
      <div id="form1" class="form-box active">
        <h3>Fiche Accueil (1)</h3>
        <label>Nom du patient :</label>
        <input id="form1_nom" type="text" />
        <label>Date :</label>
        <input id="form1_date" type="date" />
        <label>Remarque :</label>
        <textarea id="form1_rem"></textarea>
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form1')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 2 -->
      <div id="form2" class="form-box">
        <h3>Fiche Médecin (2)</h3>
        <label>Nom :</label>
        <input id="form2_nom" type="text" />
        <label>Spécialité :</label>
        <input id="form2_spec" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form2')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 3 -->
      <div id="form3" class="form-box">
        <h3>Fiche Ambulance (3)</h3>
        <label>Numéro véhicule :</label><input id="form3_veh" type="text" />
        <label>Équipe :</label><input id="form3_team" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form3')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 4 -->
      <div id="form4" class="form-box">
        <h3>Fiche Hôpital (4)</h3>
        <label>Nom :</label><input id="form4_nom" type="text" />
        <label>Service :</label><input id="form4_service" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form4')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 5 -->
      <div id="form5" class="form-box">
        <h3>Fiche Téléphone (5)</h3>
        <label>Numéro :</label><input id="form5_num" type="text" />
        <label>Contact :</label><input id="form5_contact" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form5')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 6 -->
      <div id="form6" class="form-box">
        <h3>Fiche Cœur (6)</h3>
        <label>Observation :</label><textarea id="form6_obs"></textarea>
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form6')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 7 -->
      <div id="form7" class="form-box">
        <h3>Fiche Stéthoscope (7)</h3>
        <label>Observation :</label><textarea id="form7_obs"></textarea>
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form7')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 8 -->
      <div id="form8" class="form-box">
        <h3>Fiche Notes (8)</h3>
        <label>Note :</label><textarea id="form8_note"></textarea>
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form8')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 9 -->
      <div id="form9" class="form-box">
        <h3>Fiche Injection (9)</h3>
        <label>Médicament :</label><input id="form9_med" type="text" />
        <label>Dosage :</label><input id="form9_dose" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form9')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 10 -->
      <div id="form10" class="form-box">
        <h3>Fiche Pansement (10)</h3>
        <label>Soin :</label><textarea id="form10_soin"></textarea>
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form10')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 11 -->
      <div id="form11" class="form-box">
        <h3>Fiche Trousse (11)</h3>
        <label>Matériel :</label><textarea id="form11_mat"></textarea>
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form11')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Form 12 -->
      <div id="form12" class="form-box">
        <h3>Fiche Patient (12)</h3>
        <label>Nom :</label><input id="form12_nom" type="text" />
        <label>Chambre :</label><input id="form12_chambre" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('form12')">Transmission</button>
          <button class="btn btn-orange" onclick="showForm('surveillance')">Surveillance</button>
        </div>
      </div>

      <!-- Surveillance (constantes) -->
      <div id="surveillance" class="form-box">
        <h3>Fiche Surveillance - Constantes</h3>
        <label>Tension artérielle :</label><input id="surv_tension" type="text" />
        <label>Pouls :</label><input id="surv_pouls" type="text" />
        <label>Température :</label><input id="surv_temp" type="text" />
        <label>Saturation O₂ :</label><input id="surv_sat" type="text" />
        <label>Fréquence respiratoire :</label><input id="surv_freq" type="text" />
        <div class="btn-container">
          <button class="btn btn-blue" onclick="saveForm('surveillance')">Transmission</button>
        </div>
      </div>

    </div>
  </div>

  <script>
    // affiche la fiche et charge les données enregistrées si présentes
    function showForm(formId) {
      document.querySelectorAll('.form-box').forEach(f => f.classList.remove('active'));
      const el = document.getElementById(formId);
      if (!el) return console.warn('Formulaire introuvable:', formId);
      el.classList.add('active');
      loadFormData(formId);
    }

    // retour vers la page d'accueil réelle (index.html)
    function goBack() {
      // changez 'index.html' si votre page d'accueil a un autre chemin
      window.location.href = 'index.html';
    }

    // sauvegarde les champs (inputs & textarea) du formulaire dans localStorage
    function saveForm(formId) {
      const form = document.getElementById(formId);
      if (!form) { alert('Formulaire introuvable'); return; }
      const inputs = form.querySelectorAll('input, textarea');
      const data = {};
      inputs.forEach(el => {
        if (el.id) data[el.id] = el.value;
      });
      localStorage.setItem(formId, JSON.stringify(data));
      // petit feedback non intrusif
      const previous = document.querySelector('#' + formId + ' .save-feedback');
      if (previous) previous.remove();
      const fb = document.createElement('div');
      fb.className = 'save-feedback';
      fb.style.marginTop = '10px';
      fb.style.color = '#1976d2';
      fb.textContent = 'Fiche "' + formId + '" sauvegardée';
      form.appendChild(fb);
      setTimeout(()=> fb.remove(), 2000);
    }

    // charge les données sauvegardées et les place dans les champs (si existantes)
    function loadFormData(formId) {
      const raw = localStorage.getItem(formId);
      if (!raw) {
        // si aucun enregistrement, on ne touche pas aux champs
        return;
      }
      try {
        const data = JSON.parse(raw);
        Object.keys(data).forEach(key => {
          const el = document.getElementById(key);
          if (el) el.value = data[key];
        });
      } catch (e) {
        console.error('Erreur lecture données', e);
      }
    }

    // Au chargement, afficher la fiche 1 (maintenant une vraie fiche)
    document.addEventListener('DOMContentLoaded', () => {
      showForm('form1');
    });
  </script>

</body>
</html>
